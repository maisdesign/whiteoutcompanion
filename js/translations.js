// === TRADUZIONI COMPLETE ===
    const translations = {
      it: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "Gestione professionale alleanze con calibrazione mappa",
        alliances: "Alleanze",
        assigned: "Assegnate",
        allianceManagement: "ğŸ° Gestione Alleanze",
        allianceName: "Nome alleanza...",
        addAlliance: "âœ¨ Aggiungi Alleanza",
        exportCSV: "ğŸ“Š Esporta CSV",
        exportPNG: "ğŸ–¼ï¸ Esporta PNG",
        importCSV: "ğŸ“¥ Importa CSV",
        language: "ğŸŒ Lingua",
        selectLanguage: "ğŸŒ Seleziona Lingua",
        interactiveMap: "ğŸ—ºï¸ Mappa Interattiva",
        legend: "Legenda",
        legendTitle: "ğŸ¨ Legenda Colori Ufficiali",
        facilitySummary: "ğŸ“‹ Riepilogo Strutture",
        buffSummary: "âš¡ Riepilogo Buff",
        advancedCalibration: "ğŸ”§ Calibrazione Avanzata",
        unassigned: "Non assegnata",
        // Colori
        colorCastle: "Castle (Oro)",
        colorConstruction: "Construction (Blu)",
        colorProduction: "Production (Verde)",
        colorDefense: "Defense (Verde Acqua)",
        colorGathering: "Gathering (Viola)",
        colorTech: "Research/Tech (Arancione)",
        colorWeapons: "Troop Attack (Rosso)",
        colorTraining: "Training (Giallo)",
        colorExpedition: "March/Expedition (Rosa)",
        colorStronghold: "Stronghold (Marrone)",
        colorFortress: "Fortress (Grigio Scuro)",
        // Messaggi
        noStructuresLoaded: "Nessuna struttura caricata",
        noAllianceAssigned: "Nessuna alleanza assegnata",
        noBuffRecognized: "Nessun buff riconosciuto",
        structures: "strutture",
        addAtLeastOneAlliance: "âš ï¸ Aggiungi almeno un'alleanza prima di assegnare.",
        enterAllianceName: "Inserisci un nome per l'alleanza",
        allianceExists: "Alleanza giÃ  esistente",
        maxAlliances: "Massimo 50 alleanze",
        emptyCsv: "CSV vuoto o non valido",
        importError: "Errore nell'importazione del CSV",
        languageSet: "ğŸŒ Lingua impostata!",
        calibrationUnlocked: "ğŸ”“ Calibrazione sbloccata!",
        wrongPassword: "âŒ Password errata!",
        appLoaded: "ğŸ¯ App caricata! {count} strutture con colori ufficiali.",
        assigned: "assegnate"
      },
      en: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "Professional alliance management with map calibration",
        alliances: "Alliances",
        assigned: "Assigned",
        allianceManagement: "ğŸ° Alliance Management",
        allianceName: "Alliance name...",
        addAlliance: "âœ¨ Add Alliance",
        exportCSV: "ğŸ“Š Export CSV",
        exportPNG: "ğŸ–¼ï¸ Export PNG",
        importCSV: "ğŸ“¥ Import CSV",
        language: "ğŸŒ Language",
        selectLanguage: "ğŸŒ Select Language",
        interactiveMap: "ğŸ—ºï¸ Interactive Map",
        legend: "Legend",
        legendTitle: "ğŸ¨ Official Colors Legend",
        facilitySummary: "ğŸ“‹ Facility Summary",
        buffSummary: "âš¡ Buff Summary",
        advancedCalibration: "ğŸ”§ Advanced Calibration",
        unassigned: "Unassigned",
        // Colori
        colorCastle: "Castle (Gold)",
        colorConstruction: "Construction (Blue)",
        colorProduction: "Production (Green)",
        colorDefense: "Defense (Teal)",
        colorGathering: "Gathering (Purple)",
        colorTech: "Research/Tech (Orange)",
        colorWeapons: "Troop Attack (Red)",
        colorTraining: "Training (Yellow)",
        colorExpedition: "March/Expedition (Pink)",
        colorStronghold: "Stronghold (Brown)",
        colorFortress: "Fortress (Dark Gray)",
        // Messaggi
        noStructuresLoaded: "No structures loaded",
        noAllianceAssigned: "No alliance assigned",
        noBuffRecognized: "No buff recognized",
        structures: "structures",
        addAtLeastOneAlliance: "âš ï¸ Add at least one alliance before assigning.",
        enterAllianceName: "Enter an alliance name",
        allianceExists: "Alliance already exists",
        maxAlliances: "Maximum 50 alliances",
        emptyCsv: "Empty or invalid CSV",
        importError: "Error importing CSV",
        languageSet: "ğŸŒ Language set!",
        calibrationUnlocked: "ğŸ”“ Calibration unlocked!",
        wrongPassword: "âŒ Wrong password!",
        appLoaded: "ğŸ¯ App loaded! {count} structures with official colors.",
        assigned: "assigned"
      },
      es: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "GestiÃ³n profesional de alianzas con calibraciÃ³n de mapa",
        alliances: "Alianzas",
        assigned: "Asignadas",
        allianceManagement: "ğŸ° GestiÃ³n de Alianzas",
        allianceName: "Nombre de alianza...",
        addAlliance: "âœ¨ Agregar Alianza",
        exportCSV: "ğŸ“Š Exportar CSV",
        exportPNG: "ğŸ–¼ï¸ Exportar PNG",
        importCSV: "ğŸ“¥ Importar CSV",
        language: "ğŸŒ Idioma",
        selectLanguage: "ğŸŒ Seleccionar Idioma",
        interactiveMap: "ğŸ—ºï¸ Mapa Interactivo",
        legend: "Leyenda",
        legendTitle: "ğŸ¨ Leyenda Colores Oficiales",
        facilitySummary: "ğŸ“‹ Resumen de Instalaciones",
        buffSummary: "âš¡ Resumen de Buff",
        advancedCalibration: "ğŸ”§ CalibraciÃ³n Avanzada",
        unassigned: "Sin asignar",
        // Colori
        colorCastle: "Castle (Oro)",
        colorConstruction: "Construction (Azul)",
        colorProduction: "Production (Verde)",
        colorDefense: "Defense (Verde Agua)",
        colorGathering: "Gathering (PÃºrpura)",
        colorTech: "Research/Tech (Naranja)",
        colorWeapons: "Troop Attack (Rojo)",
        colorTraining: "Training (Amarillo)",
        colorExpedition: "March/Expedition (Rosa)",
        colorStronghold: "Stronghold (MarrÃ³n)",
        colorFortress: "Fortress (Gris Oscuro)",
        // Messaggi
        noStructuresLoaded: "No hay estructuras cargadas",
        noAllianceAssigned: "No hay alianza asignada",
        noBuffRecognized: "No hay buff reconocido",
        structures: "estructuras",
        addAtLeastOneAlliance: "âš ï¸ Agrega al menos una alianza antes de asignar.",
        enterAllianceName: "Ingresa un nombre de alianza",
        allianceExists: "La alianza ya existe",
        maxAlliances: "MÃ¡ximo 50 alianzas",
        emptyCsv: "CSV vacÃ­o o invÃ¡lido",
        importError: "Error al importar CSV",
        languageSet: "ğŸŒ Â¡Idioma establecido!",
        calibrationUnlocked: "ğŸ”“ Â¡CalibraciÃ³n desbloqueada!",
        wrongPassword: "âŒ Â¡ContraseÃ±a incorrecta!",
        appLoaded: "ğŸ¯ Â¡App cargada! {count} estructuras con colores oficiales.",
        assigned: "asignadas"
      },
      fr: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "Gestion professionnelle d'alliances avec calibrage de carte",
        alliances: "Alliances",
        assigned: "AssignÃ©es",
        allianceManagement: "ğŸ° Gestion des Alliances",
        allianceName: "Nom d'alliance...",
        addAlliance: "âœ¨ Ajouter Alliance",
        exportCSV: "ğŸ“Š Exporter CSV",
        exportPNG: "ğŸ–¼ï¸ Exporter PNG",
        importCSV: "ğŸ“¥ Importer CSV",
        language: "ğŸŒ Langue",
        selectLanguage: "ğŸŒ SÃ©lectionner la Langue",
        interactiveMap: "ğŸ—ºï¸ Carte Interactive",
        legend: "LÃ©gende",
        legendTitle: "ğŸ¨ LÃ©gende Couleurs Officielles",
        facilitySummary: "ğŸ“‹ RÃ©sumÃ© des Installations",
        buffSummary: "âš¡ RÃ©sumÃ© des Buff",
        advancedCalibration: "ğŸ”§ Calibrage AvancÃ©",
        unassigned: "Non assignÃ©e",
        // Colori
        colorCastle: "Castle (Or)",
        colorConstruction: "Construction (Bleu)",
        colorProduction: "Production (Vert)",
        colorDefense: "Defense (Vert d'Eau)",
        colorGathering: "Gathering (Violet)",
        colorTech: "Research/Tech (Orange)",
        colorWeapons: "Troop Attack (Rouge)",
        colorTraining: "Training (Jaune)",
        colorExpedition: "March/Expedition (Rose)",
        colorStronghold: "Stronghold (Marron)",
        colorFortress: "Fortress (Gris FoncÃ©)",
        // Messaggi
        noStructuresLoaded: "Aucune structure chargÃ©e",
        noAllianceAssigned: "Aucune alliance assignÃ©e",
        noBuffRecognized: "Aucun buff reconnu",
        structures: "structures",
        addAtLeastOneAlliance: "âš ï¸ Ajoutez au moins une alliance avant d'assigner.",
        enterAllianceName: "Entrez un nom d'alliance",
        allianceExists: "L'alliance existe dÃ©jÃ ",
        maxAlliances: "Maximum 50 alliances",
        emptyCsv: "CSV vide ou invalide",
        importError: "Erreur lors de l'importation CSV",
        languageSet: "ğŸŒ Langue dÃ©finie !",
        calibrationUnlocked: "ğŸ”“ Calibrage dÃ©bloquÃ© !",
        wrongPassword: "âŒ Mot de passe incorrect !",
        appLoaded: "ğŸ¯ App chargÃ©e ! {count} structures avec couleurs officielles.",
        assigned: "assignÃ©es"
      },
      de: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "Professionelle Allianz-Verwaltung mit Kartenkalibrierung",
        alliances: "Allianzen",
        assigned: "Zugewiesen",
        allianceManagement: "ğŸ° Allianz-Verwaltung",
        allianceName: "Allianzname...",
        addAlliance: "âœ¨ Allianz HinzufÃ¼gen",
        exportCSV: "ğŸ“Š CSV Exportieren",
        exportPNG: "ğŸ–¼ï¸ PNG Exportieren",
        importCSV: "ğŸ“¥ CSV Importieren",
        language: "ğŸŒ Sprache",
        selectLanguage: "ğŸŒ Sprache AuswÃ¤hlen",
        interactiveMap: "ğŸ—ºï¸ Interaktive Karte",
        legend: "Legende",
        legendTitle: "ğŸ¨ Offizielle Farben Legende",
        facilitySummary: "ğŸ“‹ Anlagen-Zusammenfassung",
        buffSummary: "âš¡ Buff-Zusammenfassung",
        advancedCalibration: "ğŸ”§ Erweiterte Kalibrierung",
        unassigned: "Nicht zugewiesen",
        // Colori
        colorCastle: "Castle (Gold)",
        colorConstruction: "Construction (Blau)",
        colorProduction: "Production (GrÃ¼n)",
        colorDefense: "Defense (TÃ¼rkis)",
        colorGathering: "Gathering (Lila)",
        colorTech: "Research/Tech (Orange)",
        colorWeapons: "Troop Attack (Rot)",
        colorTraining: "Training (Gelb)",
        colorExpedition: "March/Expedition (Rosa)",
        colorStronghold: "Stronghold (Braun)",
        colorFortress: "Fortress (Dunkelgrau)",
        // Messaggi
        noStructuresLoaded: "Keine Strukturen geladen",
        noAllianceAssigned: "Keine Allianz zugewiesen",
        noBuffRecognized: "Kein Buff erkannt",
        structures: "Strukturen",
        addAtLeastOneAlliance: "âš ï¸ FÃ¼gen Sie mindestens eine Allianz hinzu, bevor Sie zuweisen.",
        enterAllianceName: "Geben Sie einen Allianznamen ein",
        allianceExists: "Allianz existiert bereits",
        maxAlliances: "Maximal 50 Allianzen",
        emptyCsv: "Leere oder ungÃ¼ltige CSV",
        importError: "Fehler beim CSV-Import",
        languageSet: "ğŸŒ Sprache eingestellt!",
        calibrationUnlocked: "ğŸ”“ Kalibrierung freigeschaltet!",
        wrongPassword: "âŒ Falsches Passwort!",
        appLoaded: "ğŸ¯ App geladen! {count} Strukturen mit offiziellen Farben.",
        assigned: "zugewiesen"
      },
      pt: {
        title: "ğŸ—ºï¸ Whiteout Survival Companion",
        subtitle: "GestÃ£o profissional de alianÃ§as com calibraÃ§Ã£o de mapa",
        alliances: "AlianÃ§as",
        assigned: "AtribuÃ­das",
        allianceManagement: "ğŸ° GestÃ£o de AlianÃ§as",
        allianceName: "Nome da alianÃ§a...",
        addAlliance: "âœ¨ Adicionar AlianÃ§a",
        exportCSV: "ğŸ“Š Exportar CSV",
        exportPNG: "ğŸ–¼ï¸ Exportar PNG",
        importCSV: "ğŸ“¥ Importar CSV",
        language: "ğŸŒ Idioma",
        selectLanguage: "ğŸŒ Selecionar Idioma",
        interactiveMap: "ğŸ—ºï¸ Mapa Interativo",
        legend: "Legenda",
        legendTitle: "ğŸ¨ Legenda Cores Oficiais",
        facilitySummary: "ğŸ“‹ Resumo de InstalaÃ§Ãµes",
        buffSummary: "âš¡ Resumo de Buff",
        advancedCalibration: "ğŸ”§ CalibraÃ§Ã£o AvanÃ§ada",
        unassigned: "NÃ£o atribuÃ­da",
        // Colori
        colorCastle: "Castle (Ouro)",
        colorConstruction: "Construction (Azul)",
        colorProduction: "Production (Verde)",
        colorDefense: "Defense (Verde Ãgua)",
        colorGathering: "Gathering (Roxo)",
        colorTech: "Research/Tech (Laranja)",
        colorWeapons: "Troop Attack (Vermelho)",
        colorTraining: "Training (Amarelo)",
        colorExpedition: "March/Expedition (Rosa)",
        colorStronghold: "Stronghold (Marrom)",
        colorFortress: "Fortress (Cinza Escuro)",
        // Messaggi
        noStructuresLoaded: "Nenhuma estrutura carregada",
        noAllianceAssigned: "Nenhuma alianÃ§a atribuÃ­da",
        noBuffRecognized: "Nenhum buff reconhecido",
        structures: "estruturas",
        addAtLeastOneAlliance: "âš ï¸ Adicione pelo menos uma alianÃ§a antes de atribuir.",
        enterAllianceName: "Digite um nome de alianÃ§a",
        allianceExists: "AlianÃ§a jÃ¡ existe",
        maxAlliances: "MÃ¡ximo 50 alianÃ§as",
        emptyCsv: "CSV vazio ou invÃ¡lido",
        importError: "Erro ao importar CSV",
        languageSet: "ğŸŒ Idioma definido!",
        calibrationUnlocked: "ğŸ”“ CalibraÃ§Ã£o desbloqueada!",
        wrongPassword: "âŒ Senha incorreta!",
        appLoaded: "ğŸ¯ App carregado! {count} estruturas com cores oficiais.",
        assigned: "atribuÃ­das"
      }
    };